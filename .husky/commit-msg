#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Commit message format validation
# Format: <type>(<scope>): <subject>
# Example: feat(auth): add Google OAuth login

commit_regex='^(feat|fix|docs|style|refactor|test|chore|build|ci|perf|revert)(\([a-z\-]+\))?: .{1,100}$'
commit_message=$(cat "$1")

if ! echo "$commit_message" | grep -qE "$commit_regex"; then
  echo "‚ùå Invalid commit message format!"
  echo ""
  echo "‚úÖ Valid format: <type>(<scope>): <subject>"
  echo ""
  echo "üìù Types:"
  echo "  feat     - New feature"
  echo "  fix      - Bug fix"
  echo "  docs     - Documentation only"
  echo "  style    - Code style changes"
  echo "  refactor - Code refactoring"
  echo "  test     - Add or update tests"
  echo "  chore    - Maintenance tasks"
  echo "  build    - Build system changes"
  echo "  ci       - CI configuration changes"
  echo "  perf     - Performance improvements"
  echo "  revert   - Revert a previous commit"
  echo ""
  echo "üìã Examples:"
  echo "  feat(auth): add Google OAuth login"
  echo "  fix(portfolio): correct calculation error"
  echo "  docs: update API documentation"
  echo ""
  exit 1
fi